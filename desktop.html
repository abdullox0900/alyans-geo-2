<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complex GSAP Scroll Animation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow-x: hidden;
        }

        .section {
            height: 100vh;
            width: 100vw;
            position: absolute;
            top: 0;
            left: 0;
        }

        #section1 {
            background-color: #ff6b6b;
            z-index: 4;
        }

        #section2 {
            background-color: #4ecdc4;
            z-index: 3;
        }

        #section3 {
            background-color: #45b7d1;
            z-index: 2;
        }

        #section4 {
            background-color: #f7d794;
            z-index: 1;
        }
    </style>
</head>

<body>
    <div class="container">
        <div id="section1" class="section"></div>
        <div id="section2" class="section"></div>
        <div id="section3" class="section"></div>
        <div id="section4" class="section"></div>
    </div>

    <script>
        gsap.registerPlugin(ScrollTrigger)

        let tl = gsap.timeline({
            scrollTrigger: {
                trigger: ".container",
                start: "top top",
                end: "+=400%",
                scrub: 3,
                pin: true,
                anticipatePin: 1,
            }
        })

        tl.to("#section1", {
            y: "-100%",
            duration: 10,
            ease: "none"
        })
            .to("#section2", {
                y: "-100%",
                duration: 10,
                ease: "none"
            }, "+=5")
            .to("#section3", {
                y: "-100%",
                duration: 10,
                ease: "none"
            }, "+=5")
            .to("#section4", {
                y: "-100%",
                duration: 10,
                ease: "none"
            }, "+=5")

        // Qo'shimcha animatsiyalar
        gsap.to("#section1", {
            scrollTrigger: {
                trigger: "#section1",
                start: "top top",
                end: "bottom top",
                scrub: true,
                onEnter: () => gsap.to("#section1", { height: "400px", duration: 0.3 }),
                onLeaveBack: () => gsap.to("#section1", { height: "100vh", duration: 0.3 }),
            }
        })

        gsap.to("#section2", {
            scrollTrigger: {
                trigger: "#section2",
                start: "top bottom",
                end: "top top",
                scrub: true,
                onEnter: () => gsap.to("#section1", { height: "150px", duration: 0.3 }),
                onLeaveBack: () => gsap.to("#section1", { height: "400px", duration: 0.3 }),
            }
        })

        // Qolgan seksiyalar uchun ham shu kabi animatsiyalarni qo'shish mumkin
    </script>
</body>

</html>